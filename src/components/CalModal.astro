---
interface Props {
  username: string;
  buttonText?: string;
  config?: {
    layout?: "month_view" | "week_view" | "column_view";
    theme?: "light" | "dark" | "auto";
    [key: string]: any;
  };
  class?: string;
}

const {
  username,
  buttonText = "Get in touch",
  config = { layout: "month_view" as const },
  class: className = "",
} = Astro.props;

const configString = JSON.stringify(config);
const buttonClasses = className || "h-8 rounded-md border border-border bg-muted px-3 text-sm font-medium hover:bg-accent cursor-pointer inline-flex items-center gap-1.5 w-fit";
---

<button
  data-cal-link={username}
  data-cal-config={configString}
  class={buttonClasses}
>
  {buttonText}
</button>

<script>
  import "../scripts/cal";
</script>
